# Как работать со сборщиком

## Начало работы

Для работы с данной сборкой в новом проекте, склонируйте все содержимое репозитория<br>
Затем, находясь в корне проекта, запустите команду `npm i`, которая установит все находящиеся в __package.json__ зависимости.<br>
После этого вы можете использовать npm-команды для сборки, итоговые файлы попадают в папку __build__ корневой директории

## Структура папок и файлов

```
├── inc/                             # Модули для gulpfile.js
├── src/                             # Исходники
│   ├── assets/                      # Папка для хранения иных ресурсов проекта (php, видео-файлы, favicon и т.д.)
│   │   └── fonts/                   # Папка для хранения шрифтов
│   ├── html/                        # Папка для хранения html-блоков страницы
│   │   └── main/                    # Пример папки для подключения блоков, для удобного структурирования файлов
│   │   └── service/                 # Служебная папка для подключения стилей и скриптов
│   ├── img/                         # Папка для хранения графики
│   │   └── favicons/                # Папка для favicon
│   │   └── sprite/                  # Специальная папка для svg-файлов, которые будут объединяться в svg-спрайт
│   ├── js/                          # Папка со скриптами
│   │   ├── modules/                 # Папка для JS-модулей
│   │   └── main.js                  # Точка входа для подключения JS модулей
│   ├── style/                       # Папка со стилями проекта (препроцессор sass в scss-синтаксисе)
│   │   └── main.scss                # Точка входа для подключения основных SCSS файлов
│   ├── vendor/                      # Папка со сторонними библиотеками
│   └── head.html                    # Служебный шаблон шапки сайта
│   └── footer.html                  # Служебный шаблон подвала сайта
│   └── page-main.html               # Пример главной страницы
│   └── index.html                   # Стартовая страница (Карта сайта)
├── .editorconfig                    # Файл с настройками форматирования кода
├── .eslint                          # Файл с настройками линтера eslint
├── .eslintignore                    # Файл с настройками исключений для линтера eslint
├── .gitignore                       # Файл, указывающий неотслеживаемые git файлы и папки 
├── .stylelintrc.json                # Файл с настройками линтера stylelint
└── Guide.md                         # Инструкция по работе со сборкой
├── gulpfile.js                      # Файл с настройками сборки
├── package.json                     # Файл с настройками сборки и установленными пакетами
├── package-lock.json                # Файл для фиксации в исходных репозиториях
└── README.md                        # Информация о сборке
└── UpdateHistory.md                 # Информация о последних обновлениях
```

## Оглавление
1. [npm-команды](#npm-команды)
2. [Работа с html](#работа-с-html)
3. [Работа с CSS](#работа-с-css)
4. [Работа с JavaScript](#работа-с-javascript)
5. [Работа со шрифтами](#работа-со-шрифтами)
6. [Работа с изображениями](#работа-с-изображениями)
7. [Работа с иными ресурсами](#работа-с-иными-ресурсами)
8. [Работа с ES Lint](#работа-с-es-lint)


## npm-команды

`npm start` - базовая команда, которая запускает сборку в режиме "для разработки", запуская сервер `browser-sync`.

`npm run build` - команда для сборки проекта. Разметка форматируется. CSS, JS и изображения минифицируются. Сервера `browser-sync` не запускается.

`npm run static` - команда, аналогичная команде `npm run build` + минификация разметки проекта. Используется для статичных сайтов.

`npm run final` - команда, аналогичная команде `npm run build` + проверка линтерами js и scss кода перед сборкой.

`npm run lint` - команда, проверяющая проект линтерами.

`npm run eslint` - команда, проверяющая js код проекта.

`npm run stylelint` - команда, проверяющая scss код проекта.

`npm run deploy` - команда, публикует статичный проект, сформированный `npm run static` на GitHub Pages.

## Работа с html

Благодаря плагину __gulp-file-include__ вы можете разделять html-файл на различные шаблоны, которые должны храниться в папке __html__. Удобно делить html-страницу на секции. Обратите внимание, что все html файлы, вложенные в папки __scr/html/*__ имеют надстройку editorconfig которая не добавляет пустую строку в конец, чтобы при сборке не образовывалось лишних пустых строк после плагина __gulp-file-include__

> Для вставки html-частей в главный файл используйте `@include('html/filename.html')`

Если вы хотите создать многостраничный сайт - копируйте __index.html__, переименовывайте как вам нужно, и используйте.

В конце сборка отформатирует html-файлы.

## Работа с CSS

В сборке используется препроцессор __sass__ в синтаксисе __scss__. Все стили проекта хранятся в папке __style__.

Чтобы подключить сторонние файлы стилей (библиотеки) просто скопируйте их в папку __src/vendor__. Создайте папку, соответствующую библиотеке и реализуйте импорт, используюя инструменты __scss__. Можно добавить библиотеки из npm через инструмент import в JS.

## Работа с JavaScript

Файл __main.js__ используется как точка входа.

> JS-код лучше делить на модули - небольшие js-файлы, которые содержат свою, изолированную друг от друга реализацию. Сами модули помещайте в папку __modules__.

Чтобы подключить сторонние js-файлы (библиотеки) просто скопируйте их в папку __src/vendor__ . Создайте папку, соответствующую библиотеке, либо, если планируется подключение из папки __src/js/**__, подключите через import в файл __main.js__ . Можно добавить библиотеки из npm через инструмент import. Сборка соберет все js файлы библиотек, сделает из них общий бандл и подключит в проект.

## Работа со шрифтами

Т.к. автор не поддерживает IE11, в сборке реализована поддержка только формата __woff2__ (это значит, что в миксине подключения шрифтов используется только данный формат).

Загружайте файлы __woff2__ в папку __assets/fonts__, а затем вызывайте миксин `@font-face` в файле __fonts.scss__.

## Работа с изображениями

Файлы графики копируются в папку __img__.

Файлы графики, которые будут обрабатываться через scss (например, через свойство background-image) копируются в папку __img/static__. Эти файлы будет обрабатывать webpack.

Если вам нужно сделать svg-спрайт, кладите нужные для спрайта svg-файлы в папку __img/sprite__.

При использовании команд  `npm run static` или `npm run build`, вы получите минифицированные изображения в итоговой папке __build/assets/img__. Все файлы обработынные webpack'ом будут в корне этой папки, остальные скопируются из исходников с созданной структурой.

## Работа с иными ресурсами

Иные ресурсы проекта, под которые не отведена соответствующая папка, должны храниться в папке __assets__. Это могут быть видео-файлы, php-файлы и прочие файли или папки с ними.

## Работа с ES Lint

При добавлении js-библиотеки, добавьте новые классы экземпляров в конфигурационный файл `.eslintrc`.
