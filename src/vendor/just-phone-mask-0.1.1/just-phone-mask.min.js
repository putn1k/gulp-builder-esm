"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var JustPhoneMask=function(){function e(t){_classCallCheck(this,e);var n={countryCode:"+7",bodyMask:" ___ ___ __ __",setPlaceholder:!1,selectors:null};Object.defineProperties(n,{maskPatternSymbol:{value:"_",writable:!1,configurable:!0},phoneMask:{get:function(){return"".concat(this.countryCode).concat(this.bodyMask)}},literalPattern:{get:function(){return new RegExp("[\\".concat(this.maskPatternSymbol,"]"))}},digitalPattern:{value:/[0-9]/,writable:!1,configurable:!1}}),this.options=Object.assign(n,t),this.options.selectors?this.maskNumbers=document.querySelectorAll("".concat(this.options.selectors)):this.maskNumbers=document.querySelectorAll('[type="tel"]'),this.check()}return _createClass(e,[{key:"check",value:function(){if(0!==this.maskNumbers.length)if(Array.from(this.maskNumbers).every((function(e){return"INPUT"===e.tagName})))this.init();else{var e=Array.from(this.maskNumbers).find((function(e){return"INPUT"!==e.tagName}));console.error("Found element tagname ".concat(e.tagName,". Element tagname must be only INPUT"))}}},{key:"init",value:function(){var e=this;this.maskNumbers.forEach((function(n){n.setAttribute("data-mask",e.options.phoneMask),e.options.setPlaceholder&&n.setAttribute("placeholder",e.options.phoneMask),n.addEventListener("input",(function(e){return t(e)}))}));var t=function(t){var n=t.target,r=n.value,a=n.dataset.mask,o="";try{for(var s=a.length,i=0,l=0;l<s&&!(l>=r.length)&&(a[l]!=="".concat(e.options.maskPatternSymbol)||null!==r[i].match(e.options.digitalPattern));){for(;null===a[l].match(e.options.literalPattern)&&r[i]!==a[l];)o+=a[l++];o+=r[i++],l++}n.value=o}catch(e){console.error(e)}}}}]),e}();
